

{% extends 'base.html'%}
{% load static %}

{% block Css_Scripts %}
<link rel="stylesheet" href="{% static 'css/tweets_targets.css'%}" type="text/css" />
{% endblock %}

{% block targets_scripts%}

<!-- <script src="{% static '/assets/js/core/jquery.min.js' %} "></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<script src="{% static '/assets/js/core/popper.min.js' %} "></script>
<script src="{% static '/assets/js/core/bootstrap.min.js' %} "></script>
<script src="{% static '/assets/js/plugins/perfect-scrollbar.jquery.min.js' %} "></script>
<script src="{% static '/assets/js/plugins/bootstrap-notify.js' %}"></script>
<script src="{% static '/assets/js/black-dashboard.min.js?v=1.0.0' %}"></script>
<script src="{% static '/assets/demo/demo.js' %} "></script> -->

<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/autofill/2.3.4/js/dataTables.autoFill.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/autofill/2.3.4/js/autoFill.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.colVis.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.print.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/colreorder/1.5.2/js/dataTables.colReorder.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/fixedcolumns/3.3.0/js/dataTables.fixedColumns.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.6/js/dataTables.fixedHeader.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/keytable/2.5.1/js/dataTables.keyTable.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/rowgroup/1.1.1/js/dataTables.rowGroup.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/rowreorder/1.2.6/js/dataTables.rowReorder.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/scroller/2.0.1/js/dataTables.scroller.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/searchpanes/1.0.1/js/dataTables.searchPanes.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/searchpanes/1.0.1/js/searchPanes.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
<script src="{% static 'scripts/tweets_target.js' %} "></script>
{% endblock %}
{% block content %}
<style>
#id_target_platform,#id_target_type,#id_twitter_username,#id_submission_date,#id_target_scheduling{
  height: 35px;
  border-radius: 5px;
  width: 350px;;

}
#success_message{
  position: absolute;;
  width: 350px;
  height: 60px;
  top: 0px;
  right: 0px;;
}

#warning_message{
  position: absolute;;
  width: 350px;
  height: 60px;
  top: 0px;
  right: 0px;;
}
.table_container{
  border-radius: 10px;

}
.form_container{

  background-color: black;
}
.table_columns{
  font-size: 12px;;
}
</style>

<!-- message for success -->
{% if messages %}
{% for message in messages %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}

<div id="success_message" class=" alert alert-success alert-dismissible fade show" role="alert">
  <strong><i class="fas fa-check 2x "></i>!</strong> {{message}}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

{% endif  %}


<!-- message for warning -->
{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}


<div id="warning_message" class=" alert alert-warning alert-dismissible fade show" role="alert">
  <strong><i class="fas fa-check 2x "></i>!</strong> {{message}}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endif  %}
{%endfor%}
{%endif%}

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8  ">
      <form action="{% url 'Twitter_Crawler:tweets_targets' %}" method="POST">
        {% csrf_token %}
       
        <!-- row start -->
          <div class="row mt-3">
            <div class="col-md-2">
              <label class="label-custom">Target Platform</label>
            </div>
            <div class="col-md-6">
          <input type="text" name="target_platform" id="target_platform" value="Twitter" readonly class="form-control form-control-custom" required />
            </div>
            <div class="col-md-4 ">
              <small class="text-info g-flex-strat-center-row"> Twitter,Facebook,Linkedin</small>
            </div>
            <div class="col-md-2"></div>
            <div class="col-md-6" id="err_target_platform">
           <!-- publish error here  -->
            </div> 
          </div>
       <!-- row end -->



        <!-- row start -->
        <div class="row mt-3">
          <div class="col-md-2">
            <label class="label-custom">Target Type</label>
          </div>
          <div class="col-md-6">
        <input type="text" name="target_type" id="target_type"  value="Tweets" readonly   class="form-control form-control-custom" required />
          </div>
          <div class="col-md-4 ">
            <small class="text-info g-flex-strat-center-row"> Tweets,Profile,Followers</small>
          </div>
          <div class="col-md-2"></div>
          <div class="col-md-6" id="err_target_type">
         <!-- publish error here  -->
          </div> 
        </div>
     <!-- row end -->


        <!-- row start -->
        <div class="row mt-3">
          <div class="col-md-2">
            <label class="label-custom">Target Username</label>
          </div>
          <div class="col-md-6">
        <input type="text" name="target_username" id="target_username"  class="form-control form-control-custom" required />
          </div>
          <div class="col-md-4 ">
            <small class="text-info g-flex-strat-center-row"> Must be valid Username</small>
          </div>
          <div class="col-md-2"></div>
          <div class="col-md-6" id="err_target_username">
         <!-- publish error here  -->
          </div> 
        </div>
     <!-- row end -->



     <!-- row start -->
     <div class="row mt-3">
      <div class="col-md-2">
        <label class="label-custom">Target Username</label>
      </div>
      <div class="col-md-6">
    <select type="text" name="target_scheduling" id="target_scheduling"  class="form-control form-control-custom" required >
      <option value="">Select Target Scheduling </option>
      {% for chioce in PERIODIC_INTERVALS %}
      <option value="{{chioce.0}}">{{chioce.1}} </option>
      {% endfor %}
     
    </select>
      </div>
      <div class="col-md-4 ">
        <small class="text-info g-flex-strat-center-row"> </small>
      </div>
      <div class="col-md-2"></div>
      <div class="col-md-6" id="err_target_scheduling">
     <!-- publish error here  -->
      </div> 
    </div>
 <!-- row end -->



 
       




       
        <div class="form-group text-center">
          <input type="submit" class="btn btn-success" value="submit" />
        </div>
      </form>
    </div>
    <div class="col-md-2"></div>
  </div>

  <div class="row">

    <div class="col-md-12 border table_container ">
      <table  id="TwitterTargetTable" class="table  ">
        <thead>
          <tr>
            <th scope="col" class="text-white text-capitalize table_columns">#</th>
            <!-- <th scope="col" class="text-white text-capitalize table_columns">target_platform</th>
            <th scope="col" class="text-white text-capitalize table_columns">target_type</th> -->
            <th scope="col" class="text-white text-capitalize table_columns">twitter_username</th>
            <th scope="col" class="text-white text-capitalize table_columns">target_scheduling</th>
            <th scope="col" class="text-white text-capitalize table_columns">scanning_status</th>
            <th scope="col" class="text-white text-capitalize table_columns">tweets_count</th>
            <th scope="col" class="text-white text-capitalize table_columns">created_at </th>
            <!-- <th scope="col" class="text-white text-capitalize table_columns">updated_at </th> -->
            <th scope="col" class="text-white text-capitalize table_columns">view_tweets </th>
            <th scope="col" class="text-white text-capitalize table_columns">re_scan </th>
            <th scope="col" class="text-white text-capitalize table_columns">other_operations </th>
          </tr>
        </thead>
        <tbody>
          {% for i in tweets_targets %}
          <tr>
            <td class="text-white table_columns">{{forloop.counter}}</td>
            <!-- <td class="text-white table_columns">{{i.target_platform}}</td>
            <td class="text-white table_columns">{{i.target_type}}</td> -->
            <td class="text-white table_columns">{{i.twitter_username}}</td>
            <td class="text-white table_columns">{{i.target_scheduling}}</td>
            <td class="text-white table_columns">{{i.scanning_status}}   {% if i.scanning_status == 'pending' %}
              <i class="fas fa-cog fa-spin"></i>
              {% endif %}<span class="{{i.twitter_username}}" id="{{i.twitter_username}}"></span> </td>
              <td class="text-white table_columns">{{i.tweets_count}}</td>
            <td class="text-white table_columns">{{i.created_at}}</td>
            <!-- <td class="text-white table_columns">{{i.updated_at}}</td> -->
            <td class="text-white table_columns"><a  href=""><i class="fas fa-eye fa-2x"></a></i></td>

            <td class="text-white table_columns"><button type="button" class="btn btn-sm btn-primary scanBtn" data-id="{{i.twitter_username}}" id="scanBtn">re_Scan </button></td>


            <td class="text-white table_columns"><button type="button" class="btn btn-sm btn-success getCount" data-id="{{i.twitter_username}}" id="scanBtn">getCount </button>
              <a type="button" class="btn btn-sm btn-danger getCount"href="" id="deleteBtn">delete </a></td>


          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>
{% endblock %}